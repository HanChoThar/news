(function(t){function e(e){for(var r,a,s=e[0],u=e[1],i=e[2],l=0,f=[];l<s.length;l++)a=s[l],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&f.push(c[a][0]),c[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);d&&d(e);while(f.length)f.shift()();return o.push.apply(o,i||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,a=1;a<n.length;a++){var u=n[a];0!==c[u]&&(r=!1)}r&&(o.splice(e--,1),t=s(s.s=n[0]))}return t}var r={},c={app:0},o=[];function a(t){return s.p+"js/"+({}[t]||t)+"."+{"chunk-2d0e9952":"d5f3bb5f","chunk-2d213e4a":"d8285732","chunk-2d2244d7":"781c7b3a"}[t]+".js"}function s(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(t){var e=[],n=c[t];if(0!==n)if(n)e.push(n[2]);else{var r=new Promise((function(e,r){n=c[t]=[e,r]}));e.push(n[2]=r);var o,u=document.createElement("script");u.charset="utf-8",u.timeout=120,s.nc&&u.setAttribute("nonce",s.nc),u.src=a(t);var i=new Error;o=function(e){u.onerror=u.onload=null,clearTimeout(l);var n=c[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;i.message="Loading chunk "+t+" failed.\n("+r+": "+o+")",i.name="ChunkLoadError",i.type=r,i.request=o,n[1](i)}c[t]=void 0}};var l=setTimeout((function(){o({type:"timeout",target:u})}),12e4);u.onerror=u.onload=o,document.head.appendChild(u)}return Promise.all(e)},s.m=t,s.c=r,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/",s.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],i=u.push.bind(u);u.push=e,u=u.slice();for(var l=0;l<u.length;l++)e(u[l]);var d=i;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"025e":function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return i}));n("0d03"),n("ac1f"),n("5319");var r=n("7ed9"),c=n("6d88"),o=n.n(c),a=o()(r["a"]),s=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300;return a.image(t).width(e).height(n).url()},u=function(t){return new Date(t).toLocaleDateString()},i=function(t){return t.replace(/\n/g,"<br>")}},"040f":function(t,e,n){"use strict";var r=n("7a23"),c={class:"bg-gray-800 rounded-lg p-4 flex flex-col sm:flex-row"},o=["src"],a={class:"flex flex-col flex-1"},s={class:"text-lg md:text-2xl font-bold mb-4"},u={class:"text-gray-500 md:text-lg mb-4 flex-1"},i={class:"flex sm:flex-col md:flex-row justify-between items-start md:items-end"},l={class:"flex items-center sm:mb-4 md:mb-0"},d=["src"],f={class:"text-white mr-4"},b={class:"text-gray-500 text-sm"},p=Object(r["h"])("Read More");function O(t,e,n,O,h,m){var j=Object(r["B"])("router-link");return Object(r["t"])(),Object(r["f"])("div",c,[n.post.image?(Object(r["t"])(),Object(r["f"])("img",{key:0,src:O.CreateURL(n.post.image,480,320),class:"block w-full sm:max-w-xs mr-4 object-cover mb-4 sm:mb-0",alt:""},null,8,o)):Object(r["e"])("",!0),Object(r["g"])("div",a,[Object(r["g"])("h3",s,Object(r["D"])(n.post.title),1),Object(r["g"])("p",u,Object(r["D"])(n.post.excerpt),1),Object(r["g"])("div",i,[Object(r["g"])("div",l,[n.post.author.avatar?(Object(r["t"])(),Object(r["f"])("img",{key:0,src:O.CreateURL(n.post.author.avatar),class:"rounded-full mr-4 w-8 h-8"},null,8,d)):Object(r["e"])("",!0),Object(r["g"])("div",null,[Object(r["g"])("p",f,Object(r["D"])(n.post.author.full_name),1),Object(r["g"])("p",b,Object(r["D"])(O.FormatDate(n.post._createdAt)),1)])]),Object(r["i"])(j,{to:"/post/".concat(n.post._id),class:"btn"},{default:Object(r["H"])((function(){return[p]})),_:1},8,["to"])])])])}var h=n("025e"),m={props:{post:{type:Object,required:!0}},setup:function(){return{FormatDate:h["b"],CreateURL:h["a"]}}},j=n("6b0d"),v=n.n(j);const g=v()(m,[["render",O]]);e["a"]=g},"0c3a":function(t,e,n){"use strict";n("ae32")},"258d":function(t,e,n){"use strict";n("a43a")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),c={class:"bg-gray-700 min-h-screen text-white"};function o(t,e,n,o,a,s){var u=Object(r["B"])("HeaderNav"),i=Object(r["B"])("Sidebar"),l=Object(r["B"])("router-view");return Object(r["t"])(),Object(r["f"])("div",c,[Object(r["i"])(u),Object(r["i"])(i),Object(r["i"])(l)])}var a=function(t){return Object(r["w"])("data-v-4855d426"),t=t(),Object(r["u"])(),t},s={class:"w-full flex justify-center items-center p-4"},u={class:"hamburger"},i={xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},l=a((function(){return Object(r["g"])("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 6h16M4 12h16M4 18h16"},null,-1)})),d=[l],f={xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},b=a((function(){return Object(r["g"])("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"},null,-1)})),p=[b],O=a((function(){return Object(r["g"])("h1",{class:"text-center text-2xl uppercase font-light tracking-widest"}," Sanity News ",-1)}));function h(t,e,n,c,o,a){return Object(r["t"])(),Object(r["f"])("header",s,[Object(r["g"])("div",{class:Object(r["o"])("menu-toggle relative z-50 ".concat(c.menu_is_active?"is_active":"")),onClick:e[0]||(e[0]=function(){return c.toggleMenu&&c.toggleMenu.apply(c,arguments)})},[Object(r["g"])("div",u,[Object(r["I"])((Object(r["t"])(),Object(r["f"])("svg",i,d,512)),[[r["F"],!c.menu_is_active]]),Object(r["I"])((Object(r["t"])(),Object(r["f"])("svg",f,p,512)),[[r["F"],c.menu_is_active]])])],2),O])}var m=n("5502"),j={setup:function(){var t=Object(m["b"])(),e=function(){t.dispatch("toggleMenu")};return{menu_is_active:Object(r["b"])((function(){return t.state.menu_is_active})),toggleMenu:e}}},v=(n("258d"),n("6b0d")),g=n.n(v);const _=g()(j,[["render",h],["__scopeId","data-v-4855d426"]]);var w=_,x={class:"p-4"},y=Object(r["g"])("h2",{class:"text-gray-500 text-sm font-bold uppercase mb-2 pl-4"}," Menu ",-1),T=Object(r["h"])(" Home "),S=Object(r["h"])(" Authors ");function P(t,e,n,c,o,a){var s=Object(r["B"])("MenuItems");return Object(r["t"])(),Object(r["f"])("aside",{ref:"damn",class:Object(r["o"])("fixed top-0 left-0 min-h-screen pt-16 z-40 w-full max-w-xs transform duration-300 bg-gray-800 ".concat(c.menu_is_active?"translate-x-0":"-translate-x-full"))},[Object(r["g"])("div",x,[y,Object(r["i"])(s,{to:"/"},{default:Object(r["H"])((function(){return[T]})),_:1}),Object(r["i"])(s,{to:"/authors"},{default:Object(r["H"])((function(){return[S]})),_:1})])],2)}function k(t,e,n,c,o,a){var s=Object(r["B"])("router-link");return Object(r["t"])(),Object(r["d"])(s,{to:n.to,class:"flex items-center p-4 border-r-4 border-transparent text-gray-100 hover:text-white hover:bg-gray-900"},{default:Object(r["H"])((function(){return[Object(r["A"])(t.$slots,"default",{},void 0,!0)]})),_:3},8,["to"])}var M={props:["to"]};n("b717");const E=g()(M,[["render",k],["__scopeId","data-v-1419809a"]]);var A=E,D={components:{MenuItems:A},setup:function(){var t=Object(m["b"])();return{menu_is_active:Object(r["b"])((function(){return t.state.menu_is_active}))}}};const L=g()(D,[["render",P]]);var C=L,N={components:{HeaderNav:w,Sidebar:C},watch:{$route:function(){this.$store.state.menu_is_active=!1}}};n("0c3a");const H=g()(N,[["render",o]]);var I=H,B=(n("d3b7"),n("3ca3"),n("ddb0"),n("b0c0"),n("6c02")),R={class:"home page"},U={class:"container mx-auto p-4"},F=Object(r["g"])("h1",{class:"text-2xl mb-8"},"Latest Posts",-1),$={class:"grid gap-4"};function G(t,e,n,c,o,a){var s=Object(r["B"])("PostCard");return Object(r["t"])(),Object(r["f"])("main",R,[Object(r["g"])("section",U,[F,Object(r["g"])("div",$,[(Object(r["t"])(!0),Object(r["f"])(r["a"],null,Object(r["z"])(c.posts,(function(t,e){return Object(r["t"])(),Object(r["d"])(s,{key:e,post:t},null,8,["post"])})),128))]),t.$store.state.total_posts>c.posts.length?(Object(r["t"])(),Object(r["f"])("button",{key:0,onClick:e[0]||(e[0]=function(e){return t.$store.dispatch("LoadMorePosts",1)}),class:"btn mt-8"}," Load more ")):Object(r["e"])("",!0)])])}var z=n("5530"),q=n("7ed9"),J=n("040f"),V={name:"Home",components:{PostCard:J["a"]},setup:function(){var t=Object(r["y"])(null),e=Object(m["b"])(),n=Object(r["b"])((function(){return e.getters.posts}));return Object(r["r"])((function(){e.dispatch("fetchPosts",2);var n='*[_type == "post"]';t.value=q["a"].listen(n).subscribe((function(t){switch(t.transition){case"update":q["a"].getDocument(t.result.author._ref).then((function(n){e.dispatch("UpdatePost",Object(z["a"])(Object(z["a"])({},t.result),{},{author:n}))}));break;case"appear":q["a"].getDocument(t.result.author._ref).then((function(n){e.dispatch("AddNewPost",Object(z["a"])(Object(z["a"])({},t.result),{},{author:n}))}));break;case"disappear":e.dispatch("Delete",t.documentId);break}}))})),Object(r["s"])((function(){t.value.unsubscribe()})),{posts:n}}};const K=g()(V,[["render",G]]);var Q=K,W=[{path:"/",name:"Home",component:Q},{path:"/authors",name:"Authors",component:function(){return n.e("chunk-2d213e4a").then(n.bind(null,"af2a"))}},{path:"/post/:id",name:"Post",component:function(){return n.e("chunk-2d2244d7").then(n.bind(null,"e00f"))}},{path:"/author/:id",name:"Author",component:function(){return n.e("chunk-2d0e9952").then(n.bind(null,"8dc3"))}}],X=Object(B["a"])({history:Object(B["b"])("/"),routes:W});X.afterEach((function(t,e){e.name&&(document.documentElement.scrollTop=0)}));var Y=X,Z=n("2909"),tt=(n("4e82"),n("0d03"),n("99af"),n("d81d"),n("4de4"),Object(m["a"])({state:{menu_is_active:!1,posts:[],authors:[],total_posts:0},getters:{posts:function(t){return t.posts.sort((function(t,e){return new Date(e._createdAt).getTime()-new Date(t._createdAt).getTime()}))},authors:function(t){return t.authors}},mutations:{TOGGLE_MENU:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t.menu_is_active="open"!==e&&("close"===e||!t.menu_is_active)},SET_POSTS:function(t,e){t.posts=e},ADD_POSTS:function(t,e){t.posts=[].concat(Object(Z["a"])(t.posts),Object(Z["a"])(e))},SET_TOTAL_POSTS:function(t,e){t.total_posts=e},INCREMENT_TOTAL_POSTS:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.total_posts+=e},SET_AUTHORS:function(t,e){t.authors=e}},actions:{toggleMenu:function(t){var e=t.commit;e("TOGGLE_MENU")},fetchPosts:function(t){var e=t.commit,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r='*[_type == "post"] { ..., author-> } | order(_createdAt desc) '.concat(n?"[0...".concat(n,"]"):"");q["a"].fetch(r).then((function(t){e("SET_POSTS",t)}));var c='count(*[_type == "post"])';q["a"].fetch(c).then((function(t){e("SET_TOTAL_POSTS",t)}))},UpdatePost:function(t,e){var n=t.commit;n("SET_POSTS",this.state.posts.map((function(t){return t._id===e._id?e:t})))},AddNewPost:function(t,e){var n=t.commit;n("SET_POSTS",[e].concat(Object(Z["a"])(this.state.posts))),n("INCREMENT_TOTAL_POSTS")},Delete:function(t,e){var n=t.commit;n("SET_POSTS",this.state.posts.filter((function(t){return t._id!==e}))),n("INCREMENT_TOTAL_POSTS",-1)},LoadMorePosts:function(t){var e=t.commit,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r='*[_type == "post"] { ..., author-> } | order(_createdAt desc) ['.concat(this.state.posts.length,"...").concat(this.state.posts.length+n,"]");q["a"].fetch(r).then((function(t){e("ADD_POSTS",t)}))},FetchAuthor:function(t){var e=t.commit,n='*[_type == "author"] | order(full_name)';q["a"].fetch(n).then((function(t){e("SET_AUTHORS",t)}))}}}));Object(r["c"])(I).use(tt).use(Y).mount("#app")},"7ed9":function(t,e,n){"use strict";var r=n("fddc");e["a"]=r({projectId:"b7xh9tvy",dataset:"production",apiVersion:"2021-03-25",useCdn:!0})},a019:function(t,e,n){},a43a:function(t,e,n){},ae32:function(t,e,n){},b717:function(t,e,n){"use strict";n("a019")}});
//# sourceMappingURL=app.a27869bb.js.map